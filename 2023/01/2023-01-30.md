# 2023-01-30

## Spring 관련

### 템플릿 엔진(Template Engine)

자바 코드를 통해서 writer.write("html") 로 동적 처리는 너무 불편한 부분이 많다.

그래서 동적인 페이지(html)를 더 편하게 만들기 위해서 나온 것이 템플릿 엔진이다.

이전에는 JSP 현재는 스프링에서 권장하는 thymeleaf 가 있다.

Jsp 는 기본적으로 request, response 를 매개변수로 받은 상태라고 생각하면된다.
그래서 따로 request, response 에 대한 부분을 명시적으로 선언을 안해도 이용하는 제약이 없다.

<% %> 태그 안에는 코드를 넣는다. 로직을 담당한다고 보면 된다.
<%= %> 태그는 자바 코드를 html로 출력하는 부분을 담당한다.

### MVC 패턴의 등장

jsp 파일에 로직과 뷰가 한번에 몰려 있어서 유지보수가 힘들어지고 별거 아닌 수정에도 jsp 로직과 뷰가 합쳐진 부분을 수정해야 한다.
다양한 코드가 한 jsp 하나에 노출이 되어지고 너무 많은 역할을 하게 되어진다.

이러한 배경으로 Mvc 패턴의 등장
모델 뷰 컨트롤러 로 나뉘어서 동작

등장 배경(같이 묶여서 사용하는 상태에서 문제점)
- 너무 많은 역할(한 곳에 너무 많은 코드)
- 변경의 라이프 사이클(변경의 라이프 사이클이 한 곳에서 일어난다. 로직과 뷰가 jsp 한 곳에서 일어난다. 프론트와 백이 나뉘어지는 원인과 동일)
- 기능 특화 => 본인에게 맞는 역할
- 관리 포인트는 다르지만 수정은 한 파일에서 일어난다.

정보
컨트롤러 : http 요청을 받아서 검증 후 비즈니스 로직을 돌고 모델에 담아준다(서비스, 리포지토리에 접근)
모델 : 뷰에 출력할 데이터를 담고 있다.
뷰: 모델을 참조하여 화면을 출력한다

주의! 컨트롤러는 비즈니스 로직을 호출을 한다. 컨트롤러에 비즈니스를 작성하면 안됨

request.getRequestDispatcher() 를 통해서 dispatcher.forward(request, response) 를 하면 내부적으로 해당 뷰로 변경

request.setAttribute(이름, 객체) 를 통해서 모델을 만들어줌

해당 모델을 가지고 jsp에서는 ${} 프로퍼티 접근법으로 ${member.id} 등을 호출
<%=((Member)request.getAttribute("member")).getId()%> 이런 방식도 있지만 프로퍼티 접근이 더욱 더 효율적이다.

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
Jsp 에서 유용한 태그를 제공해줌 forEach 같은

모델이 없더라도 컨트롤러 제공(c -> m -> v)

### Mvc 패턴 한계

- 포워드 중복(dispatcher)
- viewPath 중복(prefix, suffix)
- 사용하지 않는 코드 (response)
- 공통처리가 어렵다(위의 나열된 것) => 프론트 컨트롤러 등장 배경(공통 부분을 이곳에서 해결)
